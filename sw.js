const CACHE_NAME = 'attendance-tracker-v7-0'; const urlsToCache = [ './', './index.html', './manifest.json', './icon-192.png', './icon-512.png', 'https://fonts.googleapis.com/icon?family=Material+Icons', 'https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap', 'https://cdn.jsdelivr.net/npm/chart.js' ]; self.addEventListener('install', event => { event.waitUntil( caches.open(CACHE_NAME) .then(cache => { console.log('Opened cache'); return cache.addAll(urlsToCache); }) ); }); self.addEventListener('fetch', event => { event.respondWith( caches.match(event.request) .then(response => { if (response) { return response; } return fetch(event.request); } ) ); }); self.addEventListener('activate', event => { event.waitUntil( caches.keys().then(cacheNames => { return Promise.all( cacheNames.map(cacheName => { if (cacheName !== CACHE_NAME) { return caches.delete(cacheName); } }) ); }) ); });